{% comment %}
  Ultra-Modern Collections List Section
  Designed for high conversion with "Wow" effects, glassmorphism, and dynamic layouts.
{% endcomment %}

{% liquid
  assign container_width = section.settings.container_width
  assign card_radius = section.settings.card_radius
  assign show_count = section.settings.show_count
  assign hover_animation = section.settings.hover_animation
%}

<style>
  .collections-{{ section.id }} {
    --primary-gradient: {{ section.settings.accent_gradient | default: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }};
    --card-radius: {{ card_radius }}px;
    --grid-gap: {{ section.settings.grid_gap }}px;
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.bg_color }};
  }

  /* Bento Grid Logic */
  .collections-grid {
    display: grid;
    gap: var(--grid-gap);
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }

  @media screen and (min-width: 768px) {
    .collections-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    .collection-card--large {
      grid-column: span 2;
      grid-row: span 1;
    }
  }

  @media screen and (min-width: 1024px) {
    .collections-grid {
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }
    .collection-card--large {
      grid-column: span 2;
      grid-row: span 2;
    }
    .collection-card--wide {
      grid-column: span 2;
    }
  }

  /* Card Base */
  .collection-card {
    position: relative;
    border-radius: var(--card-radius);
    overflow: hidden;
    background: #fff;
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: inherit;
    transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
    border: 1px solid rgba(0,0,0,0.05);
  }

  .collection-card__image-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 300px;
    overflow: hidden;
  }

  .collection-card--large .collection-card__image-wrapper {
    min-height: 500px;
  }

  .collection-card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
  }

  /* Glassmorphism Overlay */
  .collection-card__overlay {
    position: absolute;
    bottom: 20px;
    left: 20px;
    right: 20px;
    padding: 24px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: calc(var(--card-radius) * 0.8);
    z-index: 2;
    transition: all 0.4s ease;
    transform: translateY(0);
  }

  .collection-card__content {
    position: relative;
    z-index: 3;
  }

  .collection-card__count {
    display: inline-block;
    font-size: 10px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: white;
    background: var(--primary-gradient);
    padding: 4px 12px;
    border-radius: 50px;
    margin-bottom: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  .collection-card__title {
    font-size: 1.5rem;
    font-weight: 800;
    color: white;
    margin: 0;
    line-height: 1.1;
    text-shadow: 0 2px 10px rgba(0,0,0,0.2);
  }

  .collection-card__cta {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 16px;
    font-size: 0.875rem;
    font-weight: 700;
    color: white;
    opacity: 0;
    transform: translateX(-10px);
    transition: all 0.3s ease;
  }

  /* Animations */
  {% if hover_animation == 'float' %}
    .collection-card:hover {
      transform: translateY(-10px) scale(1.01);
      box-shadow: 0 30px 60px -12px rgba(50, 50, 93, 0.25), 0 18px 36px -18px rgba(0, 0, 0, 0.3);
      border-color: rgba(255,255,255,0.5);
    }
  {% endif %}

  .collection-card:hover .collection-card__image {
    transform: scale(1.1);
  }

  .collection-card:hover .collection-card__cta {
    opacity: 1;
    transform: translateX(0);
  }

  .collection-card:hover .collection-card__overlay {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-5px);
  }

  /* Badge "Trending" style */
  .trending-badge {
    position: absolute;
    top: 20px;
    right: 20px;
    background: white;
    color: #000;
    padding: 6px 14px;
    border-radius: 50px;
    font-size: 11px;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 5px;
    z-index: 10;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }

  .pulse-dot {
    width: 6px;
    height: 6px;
    background: #ff4b2b;
    border-radius: 50%;
    animation: pulse 1.5s infinite;
  }

  @keyframes pulse {
    0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(255, 75, 43, 0.7); }
    70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(255, 75, 43, 0); }
    100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(255, 75, 43, 0); }
  }
</style>

<div class="collections-{{ section.id }} overflow-hidden">
  <div class="max-w-[{{ container_width }}px] mx-auto px-4 md:px-8">
    
    <div class="flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6">
      <div class="max-w-2xl">
        {% if section.settings.subtitle != blank %}
          <span class="text-primary font-bold tracking-[0.2em] uppercase text-xs block mb-3">{{ section.settings.subtitle }}</span>
        {% endif %}
        <h2 class="text-4xl md:text-6xl font-black tracking-tighter text-foreground leading-none">
          {{ section.settings.title | default: 'Explore Collections' }}
        </h2>
      </div>
      {% if section.settings.description != blank %}
        <p class="text-lg opacity-60 md:max-w-xs">{{ section.settings.description }}</p>
      {% endif %}
    </div>

    <div class="collections-grid">
      {% for collection in collections %}
        {% liquid
          assign is_large = false
          if forloop.first
            assign is_large = true
          endif
          
          assign card_class = ""
          if is_large
            assign card_class = "collection-card--large"
          elsif forloop.index == 2 or forloop.index == 3
            assign card_class = "collection-card--wide"
          endif
        %}

        <a href="{{ collection.url }}" class="collection-card {{ card_class }} group">
          <div class="collection-card__image-wrapper">
            {% if collection.featured_image %}
              {% render 'image',
                image: collection.featured_image,
                class: 'collection-card__image',
                width: 1200
              %}
            {% else %}
              {{ 'collection-1' | placeholder_svg_tag: 'w-full h-full bg-gray-200' }}
            {% endif %}

            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60"></div>
            
            {% if is_large %}
              <div class="trending-badge">
                <span class="pulse-dot"></span>
                NEW ARRIVALS
              </div>
            {% endif %}

            <div class="collection-card__overlay">
              <div class="collection-card__content">
                {% if show_count and collection.products_count > 0 %}
                  <span class="collection-card__count">
                    {{ collection.products_count }} {{ 'collections.items' | t | default: 'items' }}
                  </span>
                {% endif %}
                
                <h3 class="collection-card__title {% if is_large %}text-3xl md:text-4xl{% else %}text-xl{% endif %}">
                  {{ collection.title }}
                </h3>

                <div class="collection-card__cta">
                  <span>{{ 'collections.view' | t | default: 'Explore Now' }}</span>
                  <svg class="w-5 h-5 transition-transform group-hover:translate-x-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "High-Impact Collections",
  "settings": [
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Shop by Category"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Sub-heading",
      "default": "The Essentials"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Discover our curated selections designed for your lifestyle."
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 1000,
      "max": 1600,
      "step": 100,
      "label": "Container Max Width",
      "default": 1400,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 12,
      "max": 40,
      "step": 4,
      "label": "Grid Gap",
      "default": 24,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "card_radius",
      "min": 0,
      "max": 60,
      "step": 4,
      "label": "Card Border Radius",
      "default": 32,
      "unit": "px"
    },
    {
      "type": "checkbox",
      "id": "show_count",
      "label": "Show Product Count",
      "default": true
    },
    {
      "type": "select",
      "id": "hover_animation",
      "label": "Hover Effect",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "float", "label": "Float & Shadow" }
      ],
      "default": "float"
    },
    {
      "type": "header",
      "content": "Visuals"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color_background",
      "id": "accent_gradient",
      "label": "Accent Gradient",
      "default": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 4,
      "label": "Padding Top",
      "default": 80,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "label": "Padding Bottom",
      "default": 80,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "High-Impact Collections"
    }
  ]
}
{% endschema %}